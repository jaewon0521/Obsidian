#### 1. 사전 렌더링과 데이터 페칭 방식

##### App Router (app 디렉토리)

- **SSR(서버 사이드 렌더링)**: 서버 컴포넌트만 사용하면 브라우저는 RSC Payload(React Server Component Payload)만 받아옴. JS 번들은 필요할 때만 추가로 전달됨.
- **SSG(정적 사이트 생성)**: 정적으로 생성된 RSC Payload와, 클라이언트 컴포넌트가 있다면 해당 JS 번들만 추가로 전달됨.
- **클라이언트 컴포넌트**가 없으면 JS 번들 없이도 페이지가 동작 가능.

##### Page Router (pages 디렉토리)

- SSR/SSG 모두 항상 HTML + JS 번들을 브라우저에 전달.
- 서버 컴포넌트 개념이 없으므로, JS 번들 최소화가 어려움.

---

#### 2. RSC Payload와 JS 번들 전달 방식

| 구분        |     App Router SSR      |     App Router SSG      | Page Router SSR/SSG |
| ----------- | :---------------------: | :---------------------: | :-----------------: |
| RSC Payload |            O            |            O            |          X          |
| JS 번들     |      필요시만 전달      |      필요시만 전달      |      항상 전달      |
| HTML        | X (클라이언트에서 조립) | X (클라이언트에서 조립) |    O (항상 전달)    |

- **RSC Payload**: 서버에서 계산된 React 컴포넌트 트리의 데이터(HTML 아님)
- **JS 번들**: 클라이언트 컴포넌트가 있을 때만 전달, 없으면 전달하지 않음
- **HTML**: Page Router는 항상 HTML을 전달, App Router는 클라이언트에서 RSC Payload로 조립

---

#### 3. 이점 및 효과

- **불필요한 JS 번들 최소화**: 서버 컴포넌트만 사용하면 JS 번들이 거의 필요 없어 초기 로딩 속도와 SEO가 향상됨
- **필요한 만큼만 전달**: 클라이언트 컴포넌트가 있을 때만 JS 번들 추가
- **사전 렌더링 시점에 데이터 포함**: 서버에서 데이터를 미리 받아와 별도 fetch 없이 바로 렌더링 가능
- **빌드 사이즈/네트워크 트래픽 감소**: 실제로 전달되는 파일 크기가 줄어듦

---

#### 4. 정리

| 구분           | App Router (SSR/SSG)    | Page Router (SSR/SSG) |
| -------------- | ----------------------- | --------------------- |
| 서버 컴포넌트  | O                       | X                     |
| RSC Payload    | O                       | X                     |
| JS 번들        | 필요시만                | 항상 전달             |
| HTML           | X (클라이언트에서 조립) | O (항상 전달)         |
| 번들 사이즈    | 최소화 가능             | 항상 큼               |
| 초기 로딩 속도 | 빠름                    | 상대적으로 느림       |

---

